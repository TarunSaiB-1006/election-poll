<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title></title>
    <link href="https://fonts.googleapis.com/css2?family=Chivo:wght@400;700&display=swap" rel="stylesheet">
    <style>
:root {
  /* Main color scheme */
  --color-bg-main: #181a20;
  --color-bg-container: #23262f;
  --color-bg-section: #232c3b;
  --color-bg-candidate: #232c3b;
  --color-bg-candidate-hover: #26313f;
  --color-bg-candidate-selected: #1a222e;
  --color-bg-header: #23262f;
  --color-bg-header-gradient: linear-gradient(90deg, #23262f 60%, #00b86b 100%);
  --color-bg-logo: #00b86b;
  --color-bg-logo-light: #e3e8fa;
  --color-bg-progress: #e6f7ee;
  --color-bg-popup: rgba(24,26,32,0.85);
  --color-bg-overlay: rgba(0, 184, 107, 0.92);

  --color-border-main: #00b86b;
  --color-border-strong: #00b86b;
  --color-border-candidate: #232c3b;
  --color-border-candidate-hover: #00b86b;
  --color-border-candidate-selected: #00b86b;
  --color-border-logo: #00b86b;
  --color-border-progress: #b6f5d8;
  --color-border-indicator: #ccc;
  --color-border-indicator-active: #fff;

  --color-text-main: #f5f7fa;
  --color-text-secondary: #b6c3e0;
  --color-text-heading: #fff;
  --color-text-subtle: #666;
  --color-text-candidate: #f5f7fa;
  --color-text-candidate-dark: #003366;
  --color-text-logo: #181a20;
  --color-text-logo-light: #fff;
  --color-text-btn: #fff;
  --color-text-btn-hover: #fff;
  --color-text-btn-disabled: #999;
  --color-text-popup: #f5f7fa;
  --color-text-popup-title: #00b86b;

  --color-btn-bg: #00b86b;
  --color-btn-bg-hover: #2d5a85;
  --color-btn-bg-disabled: #999;
  --color-btn-shadow: #00b86b55;
  --color-btn-shadow-hover: #00b86b99;

  --color-indicator-bg: #b80000;
  --color-indicator-bg-active: #b80000; 
  --color-indicator-shadow: #b8000055;
  --color-indicator-shadow-active: #b80000cc;

  --color-progress-gradient: linear-gradient(90deg, #00b86b 60%, #4ade80 100%);
  --color-progress-shadow: #00b86b44;

  --color-shadow-container: #000a;
  --color-shadow-header: #0008;
  --color-shadow-candidate: #000a;
  --color-shadow-logo: #000a;
  --color-shadow-progress: rgba(0,0,0,0.08);

  --color-section-bg: #232c3b;
  --color-section-border: #00b86b;
  --color-section-title: #fff;
  --color-section-subtitle: #b6c3e0;
  --color-indicator-center: #b80000;
}

/* General styles */
html, body {
  background: var(--color-bg-main) !important;
  color: var(--color-text-main) !important;
  font-family: 'Chivo', Arial, sans-serif;
  margin: 0;
  padding: 20px;
}

.ballot-container, .ballot-page {
  background: var(--color-bg-container) !important;
  border-radius: 24px;
  box-shadow: 0 2px 32px var(--color-shadow-container);
  border: 2px solid var(--color-border-main) !important;
  max-width: 1600px;
  margin: 0 auto;
}

.ballot-header {
  background: var(--color-bg-header-gradient) !important;
  color: var(--color-text-heading) !important;
  text-align: center;
  padding: 20px;
  border-radius: 20px 20px 0 0;
  box-shadow: 0 2px 12px var(--color-shadow-header);
}

.ballot-title {
  font-size: 32px;
  font-weight: bold;
  margin: 0 0 8px 0;
  letter-spacing: 2px;
  color: var(--color-text-heading) !important;
  text-shadow: 0 2px 8px #000c;
}

.election-info,
.voting-instruction {
  color: var(--color-text-secondary) !important;
}

.instructions-section {
  background: var(--color-section-bg) !important;
  color: var(--color-text-main) !important;
  border-bottom: 1px solid var(--color-section-border);
}

.instructions-title {
  color: var(--color-section-title) !important;
}

.instructions-text {
  color: var(--color-text-main) !important;
}

.race-section {
  padding: 20px;
}

.race-header {
  text-align: center;
  margin-bottom: 20px;
  border-bottom: 2px solid var(--color-section-border);
  padding-bottom: 10px;
}

.race-title {
  font-size: 24px;
  font-weight: bold;
  margin: 0 0 5px 0;
  color: var(--color-section-title) !important;
}

.race-subtitle {
  color: var(--color-section-subtitle) !important;
}

.candidates-container {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  width: 100%;
}

.candidate-option {
  background: var(--color-bg-candidate) !important;
  border: 2px solid var(--color-border-candidate) !important;
  color: var(--color-text-candidate) !important;
  border-radius: 20px;
  box-shadow: 0 4px 16px var(--color-shadow-candidate);
  transition: box-shadow 0.2s, border-color 0.2s, background 0.2s;
  display: flex;
  align-items: center;
  gap: 40px;
  margin-bottom: 0;
  box-sizing: border-box;
  cursor: pointer;
  min-height: 240px;
  padding: 48px 40px;
  font-size: 1.5rem;
}

.candidate-option:hover {
  box-shadow: 0 0 16px 4px var(--color-btn-shadow-hover);
  border-color: var(--color-border-candidate-hover) !important;
  background: var(--color-bg-candidate-hover) !important;
}

.candidate-option.selected {
  border: 2px solid var(--color-border-candidate-selected) !important;
  background: var(--color-bg-candidate-selected) !important;
  box-shadow: 0 0 24px 2px var(--color-indicator-shadow-active);
}

.candidate-logo {
  width: 80px;
  height: 80px;
  background: var(--color-bg-logo) !important;
  color: var(--color-text-logo) !important;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 32px;
  font-weight: bold;
  flex-shrink: 0;
  border-radius: 16px;
  box-shadow: 0 2px 8px var(--color-shadow-logo);
}

.candidate-name {
  font-size: 20px;
  font-weight: bold;
  color: var(--color-text-candidate) !important;
  flex-grow: 1;
}

.voting-controls {
  display: flex;
  align-items: center;
  gap: 15px;
  flex-direction: row;
  position: relative;
}

.indicator-light {
  width: 35px;
  height: 35px;
  background: var(--color-indicator-bg);
  border: 2px solid var(--color-border-indicator) !important;
  border-radius: 50%;
  transition: all 0.3s ease;
  flex-shrink: 0;
  position: relative;
  box-shadow: 0 2px 6px var(--color-indicator-shadow);
  order: 0;
  cursor: not-allowed;
}

.candidate-option.ready-to-vote .indicator-light {
  cursor: pointer;
  border-color: var(--color-border-main) !important;
  box-shadow: 0 0 8px var(--color-indicator-shadow);
}

.candidate-option.selected .indicator-light {
  background: var(--color-indicator-bg-active);
  border-color: var(--color-border-indicator-active);
  box-shadow: 0 0 20px var(--color-indicator-shadow-active), 0 2px 6px var(--color-indicator-shadow);
  animation: ledPulseDark 2s infinite;
}

.candidate-option.selected .indicator-light::before {
  background: var(--color-text-logo-light);
  box-shadow: 0 1px 2px var(--color-border-progress), 0 -1px 2px var(--color-border-main);
}

.candidate-option.selected .indicator-light::after {
  background: radial-gradient(circle at 30% 30%, var(--color-indicator-center), #333);
  box-shadow: 0 1px 3px var(--color-border-progress), 0 -1px 3px #003a1a, 0 0 15px var(--color-indicator-shadow-active), 0 0 25px #00b86b66;
}

@keyframes ledPulseDark {
  0%, 100% {
    box-shadow: 0 0 20px var(--color-indicator-shadow), 0 2px 6px var(--color-indicator-shadow);
  }
  50% {
    box-shadow: 0 0 30px var(--color-indicator-shadow-active), 0 0 40px #00b86b66, 0 2px 6px var(--color-indicator-shadow);
  }
}

.selection-button {
  background: var(--color-btn-bg) !important;
  color: var(--color-text-btn) !important;
  border: none;
  border-radius: 35px;
  cursor: pointer;
  transition: background 0.2s, box-shadow 0.2s;
  box-shadow: 0 3px 10px var(--color-btn-shadow);
  flex-shrink: 0;
  font-size: 2rem;
  order: 1;
  padding: 0 32px;
  min-width: 160px;
  min-height: 80px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
}

.selection-button:hover,
.candidate-option.selected .selection-button {
  background: var(--color-btn-bg-hover) !important;
  color: var(--color-text-btn-hover) !important;
  box-shadow: 0 0 12px 2px var(--color-btn-shadow-hover);
}

.submit-section {
  padding: 30px;
  text-align: center;
  border-top: 1px solid var(--color-section-border);
  background: var(--color-bg-container) !important;
}

.submit-button {
  background: var(--color-btn-bg);
  color: var(--color-text-btn);
  border: none;
  border-radius: 8px;
  padding: 16px 40px;
  font-size: 1.2rem;
  font-weight: bold;
  cursor: pointer;
  box-shadow: 0 2px 8px var(--color-btn-shadow);
  transition: background 0.2s, box-shadow 0.2s;
  margin-top: 16px;
}

.submit-button:hover {
  background: var(--color-btn-bg-hover);
  color: var(--color-text-btn-hover);
  box-shadow: 0 0 12px 2px var(--color-btn-shadow-hover);
}

.submit-button:disabled {
  background: var(--color-btn-bg-disabled);
  color: var(--color-text-btn-disabled);
  cursor: not-allowed;
}

#thankyou-popup {
  background: var(--color-bg-popup) !important;
}

#thankyou-popup .popup-content {
  background: var(--color-bg-container) !important;
  color: var(--color-text-popup) !important;
  box-shadow: 0 8px 32px var(--color-shadow-container) !important;
}

#thankyou-popup h2 {
  color: var(--color-text-popup-title) !important;
}

#thankyou-popup .popup-btn {
  background: var(--color-btn-bg) !important;
  color: var(--color-text-btn) !important;
  border: none;
  border-radius: 8px;
  font-size: 1rem;
  cursor: pointer;
  padding: 10px 28px;
  margin-top: 12px;
}

.progress-bar-container {
  width: 600px;
  height: 96px;
  background: var(--color-bg-progress);
  border-radius: 48px;
  overflow: hidden;
  box-shadow: 0 1px 16px var(--color-shadow-progress);
  border: 3px solid var(--color-border-progress);
  display: flex;
  align-items: center;
  margin: 0 auto;
}

.progress-bar-fill {
  height: 100%;
  width: 0%;
  background: var(--color-progress-gradient);
  border-radius: 48px 0 0 48px;
  transition: width 1.2s cubic-bezier(.23,1.01,.32,1);
  box-shadow: 0 0 16px var(--color-progress-shadow);
  font-size: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: var(--color-text-btn);
  font-weight: bold;
}

@media (max-width: 700px) {
  .progress-bar-container {
    width: 98vw;
    min-width: 0;
    height: 60px;
    border-radius: 30px;
  }
  .progress-bar-fill {
    border-radius: 30px 0 0 30px;
    font-size: 1.3rem;
  }
}

@media (max-width: 600px) {
  .ballot-container {
    border-radius: 10px;
    padding: 0 2vw;
    box-sizing: border-box;
  }
  .candidate-option {
    border-radius: 8px;
  }
  .candidate-logo {
    background: var(--color-bg-logo) !important;
  }
  .submit-section {
    background: var(--color-bg-container) !important;
  }
}
@media (max-width: 430px) {
  .ballot-container {
    border-radius: 8px;
  }
  .candidate-option {
    border-radius: 7px;
  }
  .candidate-logo {
    background: var(--color-bg-logo) !important;
  }
}

/* Welcome Step Styles */
#welcome-step {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  text-align: center;
  padding: 0 20px;
}
#welcome-step h1 {
  font-size: 2.5rem;
  margin-bottom: 24px;
  color: var(--color-text-candidate-dark);
}
#welcome-step p {
  font-size: 1.2rem;
  margin-bottom: 32px;
  color: var(--color-text-subtle);
}
#welcome-step .submit-button {
  font-size: 1.3rem;
  padding: 18px 48px;
  background: var(--color-btn-bg);
  color: var(--color-text-btn);
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s, transform 0.2s;
  box-shadow: 0 4px 16px var(--color-btn-shadow);
}
#welcome-step .submit-button:hover {
  background: var(--color-btn-bg-hover);
  transform: translateY(-2px);
}

/* Overlay for voting feedback */
.vote-overlay {
  position: absolute;
  left: 0; right: 0; top: 0; bottom: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.4s cubic-bezier(.4,1.2,.4,1);
  font-size: 1.1rem;
  font-weight: bold;
  color: var(--color-text-btn);
  background: var(--color-bg-overlay);
  border-radius: 8px;
  z-index: 2;
}
.selection-button.selected + .vote-overlay,
.vote-overlay.active {
  opacity: 1;
  pointer-events: auto;
}

/* Indicator LED housing inner ring */
.indicator-light::before {
  content: "";
  position: absolute;
  top: 3px;
  left: 3px;
  right: 3px;
  bottom: 3px;
  background: var(--color-indicator-center) !important;
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(255, 255, 255, 0.2),
    inset 0 -1px 2px rgba(0, 0, 0, 0.5);
}

/* LED dome (actual light) */
.indicator-light::after {
  content: "";
  position: absolute;
  top: 6px;
  left: 6px;
  right: 6px;
  bottom: 6px;
  background: radial-gradient(circle at 30% 30%, #666, #333);
  border-radius: 50%;
  transition: all 0.3s ease;
  box-shadow: inset 0 1px 3px rgba(255, 255, 255, 0.3),
    inset 0 -1px 3px rgba(0, 0, 0, 0.7);
}
    </style>
  </head>
  <body>
  {% load static %}
<!-- Welcome Step -->
<div class="ballot-container ballot-page" id="welcome-step" style="display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 600px;">
  <h1 style="font-size: 2.5rem; margin-bottom: 24px;">National Public School General Elections 2025</h1>
  <p style="font-size: 1.2rem; margin-bottom: 32px;">Thank you for participating in the General Election 2024.<br>Please click below to begin voting.</p>
  <button class="submit-button" style="font-size: 1.3rem; padding: 18px 48px;" onclick="showStep('bspl')">Begin Voting</button>
</div>

<!-- Main Ballot Pages -->
<div class="ballot-container ballot-page" id="page-1" style="display: none;">
  <!-- Header for all ballot steps -->
  <h1 style="font-size: 2.2rem; margin-bottom: 18px; text-align:center;">National Public School General Elections 2025</h1>

  <!-- BSPL Step -->
  <div id="ballot-bspl" class="ballot-step">
    <h2 style="font-size: 2rem; margin-bottom: 16px; text-align:center;"></h2>
    <div class="race-section">
          <div class="race-header">
            <h2 class="race-title">BSPL</h2>
            <p class="race-subtitle">Vote for one (1)</p>
          </div>
          <div class="candidates-container">
            <!-- 10 Placeholder Candidates for BSPL -->
            <div class="candidate-option" data-candidate="bspl1">
              <div class="candidate-logo"></div>
              <div class="candidate-name">Candidate Name</div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl2">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl3">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl4">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl5">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl6">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl7">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl8">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl9">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="bspl10">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
          </div>
        </div>
        <div class="submit-section">
          <button
            class="submit-button"
            onclick="submitVote('bspl')"
            style="display: none"
          >
            SUBMIT BALLOT
          </button>
        </div>
  </div>

  <!-- BASPL Step -->
  <div id="ballot-baspl" class="ballot-step" style="display: none">
    <h2 style="font-size: 2rem; margin-bottom: 16px; text-align:center;"></h2>
    <div class="race-section">
          <div class="race-header">
            <h2 class="race-title">BASPL</h2>
            <p class="race-subtitle">Vote for one (1)</p>
          </div>
          <div class="candidates-container">
            <!-- 10 Placeholder Candidates for BASPL -->
            <div class="candidate-option" data-candidate="baspl1">
              <div class="candidate-logo"></div>
              <div class="candidate-name">Candidate Name</div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl2">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl3">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl4">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl5">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl6">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl7">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl8">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl9">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="baspl10">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
          </div>
        </div>
        <div class="submit-section">
          <button
            class="submit-button"
            onclick="submitVote('baspl')"
            style="display: none"
          >
            SUBMIT BALLOT
          </button>
        </div>
  </div>

  <!-- GSPL Step -->
  <div id="ballot-gspl" class="ballot-step" style="display: none">
    <h2 style="font-size: 2rem; margin-bottom: 16px; text-align:center;"></h2>
    <div class="race-section">
          <div class="race-header">
            <h2 class="race-title">GSPL</h2>
            <p class="race-subtitle">Vote for one (1)</p>
          </div>
          <div class="candidates-container">
            <!-- 10 Placeholder Candidates for GSPL -->
            <div class="candidate-option" data-candidate="gspl1">
              <div class="candidate-logo"></div>
              <div class="candidate-name">Candidate Name</div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl2">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl3">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl4">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl5">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl6">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl7">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl8">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl9">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gspl10">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
          </div>
        </div>
        <div class="submit-section">
          <button
            class="submit-button"
            onclick="submitVote('gspl')"
            style="display: none"
          >
            SUBMIT BALLOT
          </button>
        </div>
  </div>

  <!-- GASPL Step -->
  <div id="ballot-gaspl" class="ballot-step" style="display: none">
    <h2 style="font-size: 2rem; margin-bottom: 16px; text-align:center;"></h2>
    <div class="race-section">
          <div class="race-header">
            <h2 class="race-title">GASPL</h2>
            <p class="race-subtitle">Vote for one (1)</p>
          </div>
          <div class="candidates-container">
            <!-- 10 Placeholder Candidates for GASPL -->
            <div class="candidate-option" data-candidate="gaspl1">
              <div class="candidate-logo"></div>
              <div class="candidate-name">Candidate Name</div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl2">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl3">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl4">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl5">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl6">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl7">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl8">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl9">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
            <div class="candidate-option" data-candidate="gaspl10">
              <div class="candidate-logo"></div>
              <div class="candidate-name"></div>
              <div class="voting-controls">
                <span class="indicator-light"></span>
                <button class="selection-button">Select</button>
              </div>
            </div>
          </div>
        </div>
        <!-- REMOVE the submit-section for GASPL -->
      </div>
    </div>

    <!-- Designer Thank You Popup -->
<div id="thankyou-popup" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.35); z-index:9999; align-items:center; justify-content:center;">
  <div class="popup-content" style="background:#fff; border-radius:18px; padding:40px 32px; box-shadow:0 8px 32px #0002; min-width:320px; max-width:90vw; display:flex; flex-direction:column; align-items:center;">
    <h2 style="color:#00b86b; margin-bottom:24px;">Your Vote has been counted</h2>
    <div class="progress-bar-container" style="width:340px; max-width:90vw; margin-bottom:24px;">
      <div class="progress-bar-fill" id="progress-bar-fill"></div>
    </div>
    <button class="popup-btn" onclick="document.getElementById('thankyou-popup').style.display='none';" style="margin-top:12px; padding:10px 28px; border:none; background:#00b86b; color:#fff; border-radius:8px; font-size:1rem; cursor:pointer;">Close</button>
  </div>
</div>

<style>
.progress-bar-container {
  width: 600px;   /* Even larger width */
  height: 96px;   /* Even larger height */
  background: #e6f7ee;
  border-radius: 48px;
  overflow: hidden;
  box-shadow: 0 1px 16px rgba(0,0,0,0.08);
  border: 3px solid #b6f5d8;
  display: flex;
  align-items: center;
  margin: 0 auto;
}
.progress-bar-fill {
  height: 100%;
  width: 0%;
  background: linear-gradient(90deg, #00b86b 60%, #4ade80 100%);
  border-radius: 48px 0 0 48px;
  transition: width 1.2s cubic-bezier(.23,1.01,.32,1);
  box-shadow: 0 0 16px #00b86b44;
  font-size: 2.5rem;
  display: flex;
  align-items: center;
  justify-content: center;
  color: #fff;
  font-weight: bold;
}
@media (max-width: 700px) {
  .progress-bar-container {
    width: 98vw;
    min-width: 0;
    height: 60px;
    border-radius: 30px;
  }
  .progress-bar-fill {
    border-radius: 30px 0 0 30px;
    font-size: 1.3rem;
  }
}
    </style>

    <script>
function setupCandidateOptionEvents() {
  document.querySelectorAll('.candidate-option').forEach(option => {
    const selectionBtn = option.querySelector('.selection-button');
    const indicator = option.querySelector('.indicator-light');

    // Reset state
    option.classList.remove('ready-to-vote');
    selectionBtn.classList.remove('selected');
    indicator.classList.remove('active-indicator');

    // Selection button click
    selectionBtn.onclick = (e) => {
      e.preventDefault();
      // Remove ready state from all options in this race
      option.parentElement.querySelectorAll('.candidate-option').forEach(opt => {
        opt.classList.remove('ready-to-vote');
        opt.querySelector('.selection-button').classList.remove('selected');
        opt.querySelector('.indicator-light').classList.remove('active-indicator');
      });
      // Set ready state for this option
      option.classList.add('ready-to-vote');
      selectionBtn.classList.add('selected');
      indicator.classList.add('active-indicator');
    };

    // Indicator click
    indicator.onclick = (e) => {
      if (!option.classList.contains('ready-to-vote')) return;
      const stepDiv = option.closest('.ballot-step');
      const stepId = stepDiv ? stepDiv.id.replace('ballot-', '') : null;
      if (stepId) {
        selections[stepId] = option.getAttribute('data-candidate');
        if (stepId === "gaspl") {
          // Show thank you popup with progress bar
          showThankYouPopup(75, false); // 75% progress, no label
        } else {
          submitVote(stepId);
        }
      }
    };
  });
}

// Set progress bar to a specific percent (0-100), optionally show label
function setProgressBar(percent, showLabel = true) {
  const fill = document.getElementById('progress-bar-fill');
  if (fill) {
    fill.style.width = percent + '%';
    fill.textContent = showLabel ? (percent + '%') : '';
  }
}

// Show thank you popup with animated progress bar, optionally hide label
function showThankYouPopup(percent = 100, showLabel = true) {
  document.getElementById('thankyou-popup').style.display = 'flex';
  // Animate progress bar
  let container = document.querySelector('#thankyou-popup .progress-bar-container');
  container.innerHTML = '<div class="progress-bar-fill" id="progress-bar-fill"></div>';
  setTimeout(() => {
    setProgressBar(percent, showLabel);
  }, 100);
}

// Call after DOM is ready and after each step is shown
document.addEventListener('DOMContentLoaded', setupCandidateOptionEvents);

// Also call after showing each step
function showStep(step) {
  // Hide all ballot pages
  document.querySelectorAll('.ballot-page').forEach(page => page.style.display = 'none');
  // Hide all ballot steps
  document.querySelectorAll('.ballot-step').forEach(stepDiv => stepDiv.style.display = 'none');

  if (step === "welcome-step") {
    document.getElementById("welcome-step").style.display = "flex";
  } else {
    document.getElementById("welcome-step").style.display = "none";
    document.getElementById("page-1").style.display = "block";
    document.getElementById(`ballot-${step}`).style.display = "block";
    currentStep = step;
    setupCandidateOptionEvents(); // <-- Add this line
  }
}

// Store selections as an object (or use an array if you prefer)
let selections = {
  bspl: null,
  baspl: null,
  gspl: null,
  gaspl: null,
};
let currentStep = "bspl";
const steps = ["bspl", "baspl", "gspl", "gaspl"];

// Attach click handlers to all candidate options for all steps
steps.forEach((step, idx) => {
document.querySelectorAll(`#ballot-${step} .candidate-option`).forEach(option => {
  option.addEventListener("click", () => {
    // Deselect all in this step
    document.querySelectorAll(`#ballot-${step} .candidate-option`).forEach(opt => opt.classList.remove("selected"));
    option.classList.add("selected");

    // Get candidate ID and name
    const candidateId = option.dataset.candidate || option.dataset.candidateId;
    const candidateName = option.querySelector('.candidate-name')?.textContent || option.children[1]?.textContent || "";

    selections[step] = candidateName;
    uuid[step] = candidateId;

    // Register vote for this candidate
    voteForCandidate(candidateId);

    if (step === "gaspl") {
      // On last step, show thank you popup and reset after close
      document.getElementById("thankyou-popup").style.display = "flex";
      setTimeout(() => {
        document.getElementById("progress-bar-fill").style.width = "5%";
      }, 200);

      document.querySelector("#thankyou-popup .popup-btn").onclick = function() {
        document.getElementById("thankyou-popup").style.display = "none";
        // Reset selections for a new round
        selections = { bspl: null, baspl: null, gspl: null, gaspl: null };
        uuid = { bspl: null, baspl: null, gspl: null, gaspl: null };
        document.querySelectorAll(".candidate-option").forEach((opt) => {
          opt.classList.remove("selected");
          opt.style.pointerEvents = "";
          opt.style.opacity = "";
        });
        document.getElementById("progress-bar-fill").style.width = "0%";
        showStep("welcome-step");
      };
    } else {
      // Go to next step after a short delay for visual feedback
      setTimeout(() => showStep(steps[idx + 1]), 200);
    }
  });
});
});

      // Enable/disable next button based on selection
      function updateNextButton(step) {
        const nextButton = document.querySelector(
          `#ballot-${step} .next-button`
        );
        if (nextButton) {
          nextButton.disabled = !selections[step];
        }
      }

      // Submit logic for each step (no disabling, just go to next step)
      function submitVote(step) {
  if (!selections[step]) {
    return;
  }
  if (step === "gaspl") {
    for (step in uuid) {
      voteForCandidate(uuid[step]);
    }
    // Show the popup with progress bar and message
    document.getElementById("thankyou-popup").style.display = "flex";
    document.querySelectorAll(".candidate-option").forEach((option) => {
      option.style.pointerEvents = "none";
      option.style.opacity = "0.7";
    });
    document.querySelectorAll(".submit-button").forEach((btn) => {
      btn.disabled = true;
      btn.textContent = "BALLOT SUBMITTED";
    });

    // Animate the progress bar to a small visible amount (e.g., 5%)
    setTimeout(() => {
      document.getElementById("progress-bar-fill").style.width = "5%";
    }, 200);
  } else {
    const idx = steps.indexOf(step);
    showStep(steps[idx + 1]);
  }
}

      // Show the correct step/page by id
      function showStep(step) {
          // Hide all ballot pages
          document.querySelectorAll('.ballot-page').forEach(page => page.style.display = 'none');
          // Hide all ballot steps
          document.querySelectorAll('.ballot-step').forEach(stepDiv => stepDiv.style.display = 'none');

          if (step === "welcome-step") {
            document.getElementById("welcome-step").style.display = "flex";
          } else {
            document.getElementById("welcome-step").style.display = "none";
            document.getElementById("page-1").style.display = "block";
            document.getElementById(`ballot-${step}`).style.display = "block";
            currentStep = step;
            setupCandidateOptionEvents(); // <-- Add this line
          }
        }

      // Next step logic
      function goToStep(step) {
        showStep(step);
      }

      function goNextStep() {
        const idx = steps.indexOf(currentStep);
        if (idx < steps.length - 1) {
          showStep(steps[idx + 1]);
        }
      }

      // Back step logic
      function goBackStep() {
        const idx = steps.indexOf(currentStep);
        if (idx > 0) {
          showStep(steps[idx - 1]);
        }
      }

      // Initialize: show welcome screen first
      showStep("welcome-step");
    </script>
  </body>
</html>
